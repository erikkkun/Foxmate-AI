# 快速测试指南

## 第一步：打包应用

### 方法1：使用自动化脚本（推荐）
```bash
build_package.bat
```

### 方法2：手动打包
```bash
pyinstaller "FoxMate AI.spec"
```

**预期结果**：
- 会在 `dist/FoxMate AI/` 目录生成打包文件
- 包含 `FoxMate AI.exe` 和 `_internal/` 文件夹
- 打包过程可能需要几分钟时间

## 第二步：测试打包后的应用

### 1. 基本启动测试

1. **打开文件资源管理器**，导航到：
   ```
   dist\FoxMate AI\
   ```

2. **双击 `FoxMate AI.exe`**

3. **预期结果**：
   - ✅ 应用窗口应该出现（无控制台窗口）
   - ✅ 应该看到前端主页界面
   - ✅ 界面应该显示：
     - 菜单按钮（≡）在左上角
     - "Sign In" 按钮在右上角
     - 设置按钮（⚙）和关闭按钮（✕）
     - 中间的 "Fox it!" 大按钮
     - 底部的狐狸卡片

### 2. 界面功能测试

#### 测试菜单抽屉
- [ ] 点击左上角的菜单按钮（≡）
- [ ] 应该看到侧边抽屉菜单滑出
- [ ] 菜单应该包含：My Account, Customize, Membership, Weekly Report, Workshop, Your Fox, Setting, FAQ, Home
- [ ] 点击菜单项应该能切换到对应页面
- [ ] 点击关闭按钮（✕）或点击遮罩应该能关闭菜单

#### 测试页面导航
- [ ] 点击 "My Account" - 应该显示账户信息页面
- [ ] 点击 "Customize" - 应该显示自定义设置页面
- [ ] 点击 "Membership" - 应该显示会员页面
- [ ] 点击 "Weekly Report" - 应该显示周报页面
- [ ] 点击 "Settings" - 应该显示设置页面
- [ ] 点击 "FAQ" - 应该显示FAQ页面
- [ ] 所有页面应该能正常显示和切换

#### 测试登录功能
- [ ] 点击 "Sign In" 按钮
- [ ] 应该弹出登录对话框
- [ ] 输入用户名和密码（测试账号：Test / 123）
- [ ] 登录后应该显示用户信息

### 3. 后端功能测试

#### 测试启动后端
- [ ] 在主页点击 "Fox it!" 按钮
- [ ] 前端应用应该关闭
- [ ] 应该启动后端桌面宠物
- [ ] 应该看到浮动的狐狸宠物窗口
- [ ] 狐狸应该显示专注度分数和进度条

#### 测试专注度监控
- [ ] 狐狸宠物应该每5秒更新一次专注度分数
- [ ] 分数应该根据当前活动窗口变化
- [ ] 如果专注度低于40，应该播放声音提醒（如果启用）

## 第三步：问题排查

### 如果exe无法启动

1. **临时启用控制台查看错误**：
   - 编辑 `FoxMate AI.spec`
   - 将 `console=False` 改为 `console=True`
   - 重新打包
   - 运行exe查看错误信息

2. **常见错误及解决**：

   **错误：找不到模块**
   ```
   ModuleNotFoundError: No module named 'xxx'
   ```
   - 解决：在 `.spec` 文件的 `hiddenimports` 中添加缺失的模块

   **错误：找不到文件**
   ```
   FileNotFoundError: [Errno 2] No such file or directory
   ```
   - 解决：检查 `.spec` 文件的 `datas` 列表，确保文件路径正确

   **错误：路径问题**
   ```
   Path related errors
   ```
   - 解决：检查代码中的路径引用是否正确使用了 `sys._MEIPASS`

### 如果界面不显示

1. **检查资源文件**：
   - 确认 `frontend/pages/` 目录已正确打包
   - 确认 `frontend/routes.py` 已正确打包

2. **检查导入**：
   - 确认所有页面模块都能正常导入
   - 检查是否有循环导入问题

### 如果后端无法启动

1. **检查后端文件**：
   - 确认 `backend/run.py` 已正确打包
   - 确认模型文件（`.pkl`）已正确打包
   - 确认图片文件已正确打包

2. **检查路径引用**：
   - 确认 `backend/run.py` 中的路径引用正确
   - 确认 `backend/pet_ui.py` 中的路径引用正确

## 第四步：完整功能测试清单

### 前端功能
- [ ] 应用启动正常
- [ ] 主页显示正常
- [ ] 菜单抽屉功能正常
- [ ] 所有页面可以正常切换
- [ ] 登录功能正常
- [ ] 用户信息显示正常
- [ ] 设置页面功能正常

### 后端功能
- [ ] 后端可以正常启动
- [ ] 狐狸宠物显示正常
- [ ] 专注度分数更新正常
- [ ] 声音提醒功能正常（如果启用）
- [ ] AI提醒消息显示正常

### 资源文件
- [ ] 所有图片正常显示
- [ ] 声音文件可以正常访问
- [ ] 模型文件可以正常加载

### 路径测试
- [ ] 将整个 `FoxMate AI` 文件夹移动到其他位置
- [ ] 确认应用仍能正常运行
- [ ] 确认所有资源文件仍能正常访问

## 第五步：准备分发

测试通过后：

1. **压缩文件**：
   - 将 `dist/FoxMate AI/` 文件夹压缩为ZIP
   - 文件名建议：`FoxMate AI v1.0.zip`

2. **添加说明文件**：
   - 将 `README.txt` 添加到ZIP根目录

3. **最终文件结构**：
   ```
   FoxMate AI v1.0.zip
   ├── FoxMate AI/
   │   ├── FoxMate AI.exe
   │   └── _internal/
   └── README.txt
   ```

4. **测试压缩包**：
   - 解压到新位置
   - 确认可以正常运行

## 快速测试命令

如果您想快速测试而不打包，可以直接运行源代码：

```bash
# 测试前端
cd frontend
python app.py

# 测试后端（另一个终端）
cd backend
python run.py
```

## 需要帮助？

如果遇到问题：
1. 查看 `TEST_PACKAGING.md` 获取详细测试指南
2. 查看 `PACKAGING_FIXES.md` 了解已修复的问题
3. 临时启用控制台查看详细错误信息
